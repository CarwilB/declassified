<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Stedman">
<meta name="dcterms.date" content="1974-09-05">

<title>declassified - Bolivian President Banzer Requests Usg Guarantee Of Bolivian Neutrality In Event Peruvian/Chilean Conflict</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&amp;family=Courier+Prime:ital,wght@0,400;0,700;1,400&amp;family=Special+Elite&amp;display=swap" rel="stylesheet">


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">declassified</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cables/index.html"> 
<span class="menu-text">Cables</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/CarwilB/declassified">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/CarwilB/declassified/issues">
            Report Issue
            </a>
          </li>
      </ul>
    </div>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Bolivian President Banzer Requests Usg Guarantee Of Bolivian Neutrality In Event Peruvian/Chilean Conflict</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Stedman </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Date</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 5, 1974</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="department-of-state-telegram" class="level1">
<h1>DEPARTMENT OF STATE TELEGRAM</h1>
<p><strong>UNCLASSIFIED</strong></p>
    <div class="cable-metadata-container">
      <table class="cable-table">
              <tbody><tr class="cable-row">
          <td class="cable-label-cell"><strong>Date:</strong></td>
          <td class="cable-value-cell">September 05, 1974</td>
        </tr>
                    <tr class="cable-row">
          <td class="cable-label-cell"><strong>From:</strong></td>
          <td class="cable-value-cell">AmEmbassy La Paz</td>
        </tr>
                    <tr class="cable-row">
          <td class="cable-label-cell"><strong>To:</strong></td>
          <td class="cable-value-cell">SecState WashDC Immediate 4134</td>
        </tr>
                    <tr class="cable-row">
          <td class="cable-label-cell"><strong>Info:</strong></td>
          <td class="cable-value-cell">Oct-01 Iso-00 Nsce-00 Sso-00 /031 W ——————— 040474 O 052015z Sep 74</td>
        </tr>
                    <tr class="cable-row">
          <td class="cable-label-cell"><strong>Subject:</strong></td>
          <td class="cable-value-cell">Bolivian President Banzer Requests Usg Guarantee Of Bolivian Neutrality In Event Peruvian/Chilean Conflict</td>
        </tr>
                    <tr class="cable-row">
          <td class="cable-label-cell"><strong>TAGS:</strong></td>
          <td class="cable-value-cell">PFOR PBOR MASS BL PE CI</td>
        </tr>
                  </tbody></table>
    </div>
    <hr>
  
<ol type="1">
<li>SUMMARY: PRESIDENT BANZER TOOK OPPORTUNITY COURTESY CALL BY USCINCSO GENERAL ROSSON AND ME TO REQUEST USG CONSIDER GUARANTEEING BOLIVIAN NEUTRALITY IN EVENT PERUVIAN/CHILEAN CONFLICT. ALSO STATED THAT BOLIVIA NEEDS A MINIMUM MILITARY CAPABILITY TO DEFEND ITS TERRITORY</li>
</ol>
<p>IN EVENT BOLIVIA INVOLVED IN PERU/CHILEAN ARMED OPERATIONS. PRESIDENT SAID THIS CONCERN IS ONE HE HAS LONG HELD AND WOULD HAVE RAISED WITH PRESIDENT NIXON IF HE HAD MADE TRIP TO U.S. IN OCT. 1973 AND WOULD SURELY RAISE WITH PRESIDENT FORD WERE HE TO HAVE OPPORTUNITY TO MAKE TRIP TO U.S. DURING HIS TERM IN OFFICE.</p>
<ol start="2" type="1">
<li>ON SEPT 5 GENERAL ROSSON, USCINCSO, AND I MADE EARLY MORING COURTESY CALL ON PRESIDENT BANZER. AFTER USUAL EXCHANGE OF PLEASANTRIES, GENERAL ROSSON NOTED IMPROVEMENT IN BOLIVIAN ARMED FORCES OVER THAT HE OBSERVED LAST YEAR. GENERAL ROSSON STRESSED MARKED PROGRESS IN MAINTENANCE CAPABILITY OF SEVERAL UNITS. ROSSON ALSO NOTED STRENGTHENED BALANCE OF PAYMENT SITUATION. PRESIDENT ACKNOWLEDGED DEGREE OF IMPROVEMENT BUT SAID THAT RATE OF ADVANCEMENT NOT AS FAST AS HE AND THE ARMED FORCES WISHED. HE ALSO NOTED THAT POLITICAL STABILITY WAS KEY FACTOR REQUIRED TO SECRET</li>
</ol>
<p>SECRET</p>
<p>052142Z</p>
<p>ENABLE THE COUNTRY TO EXPLOIT ITS RICHES AND TO BENEFIT FROM</p>
<p>PRESENT HIGH LEVEL OF FOREIGN EXCHANGE EARNINGS FROM MINERALS EXPORTS. PRESIDENT THEN SAID HE HAD A DEEP-SEATED CONCERN WHICH HE HAD HELD FOR A LONG TIME AND WISHED TO TELL US ABOUT BECAUSE IT IS A MATTER OF GRAVE IMPORTANCE TO BOLIVIA. HE SAID HE HAS BEEN AND IS TROUBLED ABOUT THE NEAR-TERM PROSPECT OF ARMED CONFLICT BETWEEN PERU AND CHILE AND THE PROBABLE INVOLVEMENT OF BOLIVIA.</p>
<ol start="3" type="1">
<li>PRESIDENT BANZER SAID THAT HE HAD HAD THE OPPORTUNITY DURING HIS 25 YEARS OF MILITARY SERVICE TO MEET AND KNOW PERUVIANS AND CHILEANS, MILITARY AND CIVILANS, FROM LOW-RANKING TO HIGH AUTHORITIES. HE SAID HE HAD ATTENDED CONFERENCES, BEEN ON MISSIONS, AND SERVED IN OTHER COUNTRIES SUCH AS THE U.S. AS MILITARY ATTACHE, AND HAD GOTTEN TO KNOW PERUVIAN AND CHILEAN THINKING ABOUT ONE ANOTHER. RECENTLY HE HAD HAD PRIVATE CONVERSA- TIONS WITH PRESIDENT VELASCO OF PERU AND PRESIDENT PINOCHET OF CHILE. BOTH MEN EXPRESSED TO HIM FEELINGS WHICH BANZER HIMSELF SAID HE HAD OBSERVED ARE STRONGLY HELD BY THE PEOPLE OF BOTH COUNTRIES. IN THE CASE OF PERU, THERE IS A FERVENT DESIRE TO RECONQUER TERRITORIES LOST IN THE WAR OF THE PACIFIC. IN THE CASE OF CHILE, THERE IS A FIRM CONVICTION THAT IT WILL DEFEND TERRITORIES NOW UNDER ITS SOVEREIGN CONTROL. PRESIDENT BANZER SAID THAT HE HAS CONCLUDED THAT IN THE SHORT OR IN THE MEDIUM TERM THERE WILL BE ARMED CONFLICT BETWEEN THE TWO COUNTRIES. HE IS CONVINCED THAT EVEN THOUGH BOLIVIAN POLICY IS NEUTRALITY, HIS COUNTRY WILL BE INVOLVED AGAINST ITS WILL. HE NOTED, FOR EXAMPLE, THAT A PERUVIAN MILITARY OFFICER NOW HOLDING A HIGH POSITION IN THE GOP, WHEN A MEMBER OF THE INTER-AMERICAN DEFENSE BOARD SOME YEARS AGO, HAD REVEALED TO HIM, WHEN HE WAS MILITARY ATTACHE IN WASHINGTON, PERUVIAN WAR PLANS WHICH INVOLVED USE OF BOLIVIAN AIR SPACE. BANZER SAID THAT THE PERUVIAN PLANS INCLUDE THE USE OF AIRPORTS BUILT BUT NOT NOW USED (HE SAID THAT HE HIMSELF KNOWS NONE OF SUCH AIRPORT) TO LAUNCH AIR STRIKES FROM PERU INTO BOLIVIA TO PASS SOUTH BEHIND THE BOLIVAN CORDILLERA AND THEN INTO CHILEAN TERRITORY. PRESIDENT BANZER NOTED FURTHER THAT THE PROBLEM IS NOT MERELY A THREE-CORNERED PROBLEM INVOLVING BOLIVIA, CHILE, AND PERU, BUT WILL INVOLVE MANY OTHER LATIN AMERICAN COUNTRIES. BRAZIL WILL SURELY BACK CHILE. PARAGUAY WILL SYMPATHIZE WITH BRAZIL AND CHILE BECAUSE OF ITS IDEOLOGICAL COMPATIBILITY. THE ARGENTINE POSITION IS NOT NOW CLEAR BECAUSE OF THE MUDDLED SITUATION THERE. SECRET</li>
</ol>
<p>SECRET</p>
<p>052142Z</p>
<ol start="4" type="1">
<li>PRESIDENT BANZER SAID THAT THE PERUVIAN/CHILEAN PROBLEM IS NOW SEVERELY AGGRAVATED BY THE TOTALLY OPPOSITE IDEOLOGIES OF THE TWO COUNTRIES. HE ALSO NOTED THAT THE ARMED FORCES OF BOTH COUNTRIES HAVING TALKED ABOUT RECONQUEST AND DEFENSE FOR SO MANY YEARS NOW HAVE A PASSIONATELY HELD DOCTRINE. HE SAID THAT HE HAS EVIDENCE THAT PERU HAS ATTEMPTED TO INFLUENCE DOMESTIC POLITICAL EVENTS IN BOLIVIA TO BRING ABOUT A REGIME MORE COMPATIBLE</li>
</ol>
<p>WITH THE PRESENT ONE IN LIMA. WHILE HISTORY MIGHT SUGGEST THAT BOLIVIA WOULD SIDE WITH PERU BECAUSE THEY BOTH LOST IN THE WAR OF THE PACIFIC, THE PRESENT IDEOLOGICAL SITUATION IN PERU PROMPTS BOLIVIA TO ADOPT ITS BASIC POLICY OF NEUTRALITY. PRESIDENT BANZER SAID THAT PERUVIAN PRESIDENT VELASCO TOLD HIM THAT BOLIVIA MAY WORK OUT AN ACCESS TO THE SEA WITH CHILE, BUT IT WOULD BE WORTHLESS IF IT INCLUDED FORMER PERUVIAN TERRITORY BECAUSE PERU INTENDS TO RECONQUER THAT AREA.</p>
<ol start="5" type="1">
<li><p>PRESIDENT BANZER STRESSED THE FUNDAMENTAL POLICY OF BOLIVIA THAT IT BE NEUTRAL IN THE EVENT OF CONFLICT BETWEEN PERU AND CHILE, BUT HE EMPHASIZED THAT BECAUSE BOLIVIA MIGHT INEVITABLY BE INVOLVED AND HAS LIMITED CAPABILITY TO DEFEND ITS TERRITORY, IT NEEDS A GUARANTEE, BOTH MILITARY AND MORAL, OF A FRIENDLY AND STRONG COUNTRY. THE U.S. IS THE OBVIOUS CHOICE AMONG BOLIVIA’S FRIENDS TO PROVIDE THIS GUARANTEE. ALSO HE SAID THAT BOLIVIA NEEDS A MINIMUM MILITARY CAPABILITY TO PROTECT ITS TERRITORIAL SOVEREIGNTY IN THE EVENT OF A CONFLICT. HE SAID THAT HE WOULD BE DERELICT IN HIS DUTIES IF HE DID NOT ENSURE THAT BOLIVIA’S FORCES ARE AT LEAST ABLE TO MOVE TO THE FRONTIERS TO PROTECT THEM AGAINST INCURSIONS FROM EITHER PERU OR CHILE. HE SAID THIS SUBJECT HAD BEEN RAISED LY IN THE MARCH 1974 COCHABAMBA CONSULTATIVE MEETING BUT HAS BEEN KEPT OUT OF THE BOLIVIAN PRESS. HE SAID THAT THE ISSUE IS ONE WHICH HE CANNOT RAISE PUBLICLY IN BOLIVIA BECAUSE THE BOLIVIANS WILL BELIEVE THAT HE IS SEEKING TO EXPLOIT THE SITUATION TO MAINTAIN HIMSELF IN OFFICE. IN THIS REGARD, HE SAID THAT HE AND HIS GOVERNMENT ARE FIRMLY WEDDED TO HOLDING ELECTIONS IN 1975 AND TO TURNING THE GOVERNMENT OVER TO THE ELECTED PRESIDENT.</p></li>
<li><p>PRESIDENT BANZER ASKED GENERAL ROSSO AND ME TO TRANSMIT TO THE HIGHEST LEVELS OF THE U.S. GOVERNMENT FOR SERIOUS CONSIDERATION HIS PERSONAL APPEAL FOR A GUARANTEE OF BOLIVIAN SECRET</p></li>
</ol>
<p>SECRET</p>
<p>052142Z</p>
<p>NEUTRALITY AND FOR THE NECESSARY MINIMUM MILITARY DEFENSIVE CAPABILITY, BASED ON HIS CONCERN THAT BOLIVIA WOULD BE DRAWN INTO A PERUVIAN/CHILEAN CONFLICT WHICH HE FEARS IS COMING SOON. HE NOTED THAT HE WAS NOT MAKING A “DENUNCIA” BUT WAS PRESENTING FACTS AS THEY NOW EXIST.</p>
<ol start="7" type="1">
<li><p>GENERAL ROSSON SPOKE FOR HIMSELF AND ME, THANKING PRESIDENT BANZER FOR HIS CLEAR AND CONCISE STATEMENT OF BOLIVIA’S CONCERNS AND SAID THAT THEY WOULD BE TRANSMITTED TO WASHINGTON AS THE PRESIDENT HAD REQUESTED. THE CONVERSATION THEN CLOSED WITH EXPRESSIONS OF TRADITIONAL FRIENDSHIP BETWEEN THE U.S. AND BOLIVIA.</p></li>
<li><p>COMMENT AND CTION REQUESTED: PRESIDENT BANZER APPEARED SINCERELY TROUBLED ABOUT THE PERUVIAN/CHILEAN SITUATION. ACCORD-</p></li>
</ol>
<p>INGLY, I URGE THAT THE DEPARTMENT ARRANGE FOR THE HIGHEST POSSIBLE REVIEW OF PRESIDENT BANZER’S REQUEST AND, TO THE EXTENT POSSIBLE, OBTAIN AS POSITIVE A REPLY AS WE CAN MAKE TO HIM ABOUT MAINTENANCE OF BOLIVIA’S NEUTRALITY IN THE EVENT OF A PERUVIAN/CHILEAN CONFLICT. AS TO THE MINIMUM MILITARY CAPACITY, AN EXPRESSION OF COOPERATION AND FORTHCOMINGNESS RELATED TO THE MAP GRANT MATERIEL PROGRAM AND FUTURE FMS CREDIT LEVELS WOULD BE APPROPRIATE. A LETTER FROM PRESIDENT FORD ON THESE TWO POINTS SHOULD BE CONSIDERED AS A POSSIBLE VEHICLE FOR OUR REPLY. I ALSO NOTE THAT PRESIDENT BANZER’S REQUEST STRENGTHENS OUR PROPOSAL THAT THE POLICY PLANNING STAFF VISITS TO LATIN AMERICA INCLUDE BOLIVIA. IT SHOULD NOT BE OVERLOOKED THAT THE PRESIDENT BROADLY HINTED THAT HE WOULD LIKE AN INVITATION TO VISIT THE U.S. IF SUCH A VISIT COULD BE TIMED IN THE EARLY SPRING OF 1975, BEFORE THE BOLIVIAN ELECTIONS BUT AFTER BANZER HAS TAKEN HIMSELF OUT OF THE RACE, I BELIEVE IT WOULD HELP BANZER GUIDE BOLIVIA THROUGH THE CONSTITUTIONAL TRANSITION WITH LESS INSTABILITY–A MAJOR U.S. OBJECTIVE HERE. SEPARATE TELEGRAM WILL FOLLOW ELABORATING OUR VIEWS ON A POSSIBLE VISIT OF PRESIDENT BANZER TO WASHINGTON.</p>
<ol start="9" type="1">
<li>DEPT PLEASE PASS DOD/OSD, DOD/JCS, USCINCSO, AND DOD/ISA. STEDMAN</li>
</ol>
<p>SECRET</p>
<hr>
<section id="message-attributes" class="level4">
<h4 class="anchored" data-anchor-id="message-attributes">Message Attributes</h4>
<ul>
<li><p><strong>Document Number:</strong> 1974LAPAZ05772</p></li>
<li><p><strong>Date:</strong> September 05, 1974</p></li>
<li><p><strong>Classification:</strong> UNCLASSIFIED</p></li>
<li><p><strong>Declassified:</strong> 28 MAY 2004</p></li>
<li><p><strong>Concepts:</strong> MILITARY ASSISTANCE, FOREIGN RELATIONS, ECONOMIC CONDITIONS, COMBAT OPERATIONS, POLITICAL SITUATION</p></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>