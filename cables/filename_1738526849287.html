<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Stedman">
<meta name="dcterms.date" content="1974-05-14">

<title>declassified - Pl-480 Title I Lima For Agatt</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&amp;family=Courier+Prime:ital,wght@0,400;0,700;1,400&amp;family=Special+Elite&amp;display=swap" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">declassified</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cables/index.html"> 
<span class="menu-text">Cables</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/CarwilB/declassified">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://github.com/CarwilB/declassified/issues">
            Report Issue
            </a>
          </li>
      </ul>
    </div>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Pl-480 Title I Lima For Agatt</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Stedman </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Date</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 14, 1974</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="department-of-state-telegram" class="level1">
<h1>DEPARTMENT OF STATE TELEGRAM</h1>
<p><strong>UNCLASSIFIED</strong></p>
    <div class="cable-metadata-container">
      <table class="cable-table">
              <tbody><tr class="cable-row">
          <td class="cable-label-cell"><strong>Date:</strong></td>
          <td class="cable-value-cell">May 14, 1974</td>
        </tr>
                    <tr class="cable-row">
          <td class="cable-label-cell"><strong>From:</strong></td>
          <td class="cable-value-cell">AmEmbassy La Paz</td>
        </tr>
                    <tr class="cable-row">
          <td class="cable-label-cell"><strong>To:</strong></td>
          <td class="cable-value-cell">SecState WashDC Priority 3088</td>
        </tr>
                    <tr class="cable-row">
          <td class="cable-label-cell"><strong>Info:</strong></td>
          <td class="cable-value-cell">Oct-01 Iso-00 Aid-20 Iga-02 Eb-11 Agr-20 L-03 Trse-00 Come-00 Drc-01 Rsc-01 /079 W ——————— 018954</td>
        </tr>
                    <tr class="cable-row">
          <td class="cable-label-cell"><strong>Subject:</strong></td>
          <td class="cable-value-cell">Pl-480 Title I Lima For Agatt</td>
        </tr>
                    <tr class="cable-row">
          <td class="cable-label-cell"><strong>TAGS:</strong></td>
          <td class="cable-value-cell">EAID, EAGR, ECON, BL</td>
        </tr>
                    <tr class="cable-row">
          <td class="cable-label-cell"><strong>Ref:</strong></td>
          <td class="cable-value-cell">STATE 092148 AND LA PAZ A-023. SUMMARY: WE ESTIMATE THAT EVEN IF PRESENT COMMERCIAL WHEAT/FLOUR IMPORT ARRANGEMENTS IMPLEMENTED BOLIVIA WILL HAVE SUPPLY GAP OF ABOUT 40,000 M.T. OF WHEAT WHICH SHOULD BE MET BY PL-480. WE BELIEVE FURTHER AGREEMENT JUSTIFIED ON BASIS POOR BALANCE OF PAYMENTS PROSPECTS FOR 1975, AS INTEGRAL ELEMENT USG ASSISTANCE STRATEGY FOR AGRRICULTURE SECTOR AND OTHER DEVELOPMENT SECTORS IN WHICH USG DIRECTING ITS EFFORTS. WE ALSO SEE POSSIBILITY THAT PL-480 GENERATIONS MIGHT BE USED TO HELP FINANCE LOCAL CURRENCY COSTS LATER PHASES RECONSTRUCTION FLOOD DAMAGED AREAS. WE JUDGE PL-480 HAS HIGH GOB PRIORITY, IS POLITICALLY IMPORTANT AND THAT USG HAS RESPONSIBILITY TO USE THIS FLEXIBLE TOOL IN HELPING SOLVE BOLIVIA’S GRAIN SUPPLY PROBLEM AND TO AVOID JOLTING CHANGE FROM SUBSTANTIAL WHEAT CREDIT PROGRAM TO NO WHEAT CREDIT PROGRAM AT ALL. END SUMMARY:</td>
        </tr>
            </tbody></table>
    </div>
    <hr>
  
<ol type="1">
<li><p>TABLE 1. WHEAT. FY 1974 ESTIMATE. AGREEMENTS: 0; SHIPMENTS: 93,600 M.T.; CARRYOVER TO FY 1975: 3,500 M.T.</p></li>
<li><p>FY 1975 ESTIMATE. AGREEMENTS: 36,778 M.T. (US$ 5.0 MILLION);</p></li>
</ol>
<p>01 OF 02 142301Z</p>
<p>SHIPMENTS: 40,278 M.T. (US$ 5.5 MILLION); CARRYOVER TO FY 1976: 0.</p>
<ol start="3" type="1">
<li>TABLE 2. WHEAT. FY 1973 FY 1974 FY 1975 SUPPLY ACTUAL ESTIMATE PROJECTED A. BEGINNING STOCK 50,800 6,000 0 B. PRODUCTION 54,000 57,200 58,700 C. IMPORTS 163,100 194,100 236,278</li>
<li>COMMERCIAL 123,200 97,200 182,700</li>
<li>PL-480 39,900 96,900 43,578 A. SALES 37,700 93,600 40,278 B. DONATIONS 2,200 3,300 3,300</li>
<li>OTHER DONATIONS 0 0 10,000 TOTAL SUPPLY 267,900 257,300 294,978 DISTRIBUTION A. CONSUMPTION 250,400 244,900 270,800 B. FEED/SEED/WASTE 11,500 12,400 12,400 C. EXPORTS – – – D. ENDING STOCKS 6,000 0 1,778 E. TOTAL DISTRIBUTION 267,900 257,300 294,978</li>
<li>FOREGOING TABLES REQUIRE SOME EXPLANATION. CONSUMPTION WAS CURTAILED IN FY 1974 BY (A) FAILURE OF ARGENTINA TO DELIVER ON COMMITMENTS AND OF GOB TO MAKE TIMELY ALTERNATIVE ARRANGEMENTS;</li>
</ol>
<ol start="2" type="A">
<li>TRASNPORTATION DIFFICULTIES THAT AFFECTED ARGENTINA, BOLIVIAN, CHILEAN AND PERUVIAN RAILWAYS (MAINLY BECAUSE OF INSUFFICIENT RAILWAY CARS, STRIKES, LANDSLIDES AND FLOODING) AND THAT AFFECTED INTERNAL DISTRIBUTION IN BOLIVIA WHETHER BY RAIL OR TRUCK (MAINLY DUE TO LANDSLIDES AND FLOODING); AND (C) RISING PRICES OF WHEAT, FLOUR AND BREAD. OUR PROJECTION FOR FY 1975 ASSUMES CONSUMPTION WILL RETURN TO AT LEAST FOUR PERCENT ANNUAL GROWTH TRACK TAKING FY 1973 AS BASE YEAR. (HISTORICAL CONSUMPTION TREND FROM 1968 TO 1972 WAS SLIGHTLY MORE THAN 5 PERCENT). SHOULD CONSUMPTION NOT REACH THIS LEVEL AND INSTEAD REMAIN STAGNANT AT ABOUT 245,000 M.T., OUR PROJECTION WOULD IMPLY HEALTHY AND MUCH NEEDED INCREASE IN STOCKS TO ABOUT 27,578 M.T. STOCK LEVEL IN TABLE 2 UNREALISTI- CALLY LOW AND GOB AUTHORITIES UNDOUBTEDLY PLANNING TON HIGHER LEVEL.</li>
</ol>
<ol start="5" type="1">
<li>OUR COMMERCIAL IMPORT ESTIMATES FOR FY 1975 INCLUDE 20,000 M.T. OF FLOUR ALREADY PURCHASED FROM U.S., 30,000 M.T. OF WHEAT WHICH PROBABLY WILL ALL COME FROM U.S. UNDER ALREADY AUTHORIZED CALL FOR BIDS AND 90,000 M.T. OF FLOUR FROM ARGENTINA UNDER AN AGREEMENT</li>
</ol>
<p>01 OF 02 142301Z</p>
<p>ALREADY REACHED WITH GOA. 6. GOB AUTHORITIES HAVE LITTLE CONFIDENCE, HOWEVER, THAT 90,000 M.T. FLOUR AGREEMENT WILL BE CARRIED OUT. GOA FAILED TO DELIVER ABOUT 34,000 M.T. OF FLOUR AT US$ 165 PER M.T. UNDER 1973 AGREE- MENT. ACCORDING TO SUBSECRETARY LANDIVAR GOB HAD OPENED L/C’S AND MADE DOWN PAYMENT IN 1973 ON REMAINING 34,000 M.T. AND IS NOW REFUSING PROCEED WITH PURCHASES UNDER 90,000 M.T. AGREEMENT UNTIL 1973 COMMITMENT FULFILLED OR DOWN PAYMENT RETURNED. GOB</p>
<p>ALSO HAD AGREEMENT WITH GOA TO PURCHASE 30,000 M.T. OF WHEAT IN ADDITION TO 90,000 M.T. OF FLOUR, BUT THIS AGREEMENT WAS CAN- CELLED (PRESUMABLY BEFORE L/C’S OPENED) WHEN GOB DISCOVERED THAT WORLD MARKET WHEAT PRICES, ESPECIALLY U.S. PRICES, HAD FALLEN FAR BELOW GOA QUOTE. UNCERTAINTIES ABOUT ARGENTINE DELIVERIES MAY GROW INTO MAJOR PROBLEM, CAUSING GOB TO SHIFT SOME OF THESE FLOUR PURCHASES TO OTHER SUPPLIERS IN LATE CY 1974. 7. BOLIVIA HAS GREATLY IMPROVED EXPORT EARNINGS PROSPECTS AND B/P SURPLUS FOG CY 1974. BELIEVE, HOWEVER, ATTENTION SHOULD BE GIVEN TO FORTUITOUS AND LIKELY HIGHLY TRANSIENT NATURE THIS IMPROVEMENT. FIRST, IT SHOULD BE BORNE IN MIND THAT IN CY 1973, BOLIVIA’S FOREIGN EXCHANGE COST FOR 93,800 M.T. OF IMPORTED FLOUR WAS ABOUT US<span class="math inline">\(16.9 MILLION AND FOR ABOUT 71,400 M.T. OF IMPORTED WHEAT (ALL
PL-480 TITLE I) WAS ABOUT US\)</span> 4.2 MILLION INCLUDING CUP, 5 PERCENT DOWN PAYMENT, INTEREST, FREIGHT AND INSURANCE. AT CURRENT PRICES OF ABOUT US$ 290 PER M.T. (CIF LA PAZ) FOR IMPORTED FLOUR AND US$ 200 PER M.T. (CIF LA PAZ) FOR IMPORTED WHEAT, SAME TONNAGES WOULD COST US$ 27.2 MILLION AND US$ 14.3 MILLION RES- PECTIVELY WITHOUT PL-480 CREDIT. THIS WOULD MEAN SUDDEN US$ 20.4 MILLION IMPORT COST. ON BASIS OUR CURRENT ESTIMATES FOR FLOUR AND WHEAT US$ 15.2 MILLION (USING ABOVE UNIT COSTS) FOR US$ 28.5 MILLION INCREASE OVER 1973 PAYMENTS. THIS INCREASE PLUS ALMOST US$ 20 MILLION INCREASE IN GULF COMPENSATION PAYMENTS OVER 1973 AND OTHER DEBT SERVICE INCREASES WILL CUT DEEPLY INTO BOLIVIA’S EXCHANGE RECEIPT GAINS DESPITE RISING PRICES FOR METALS AND HIGH, BUT DECLINING, PRICES FOR CRUDE OIL. 8. WHILE BOLIVIA’S 1974 BALANCE OF PAYMENTS SURPLUS NOW MAY TURN OUT TO BE CLOSER TO US$ 50 MILLION THAN TO LOW END OF RANGE SENT REFAIR, THIS DUE IN LARGE PART TO LARGE COMMERCIAL BANK LOANS WHICH DO NOT INDICATE STRENGTHENING OF BASIC BALANCE. WHILE BASIC BALANCE PROBABLY WILL IMPROVE IN 1974, MUCH BASED ON FRAGILE PRICE INCREASES OF METALS (CONCENTRATES) EXPORTS. NO ONE SURE WHEN SPECULATIVE BUYING MAY END AND SEND PRICES DOWN.</p>
<p>01 OF 02 142301Z</p>
<ol start="9" type="1">
<li>B/P SURPLUS FOR BOLIVIA LIKELY TO BE SHORT-LIVED AS IMPORT PRICES, FREIGHT AND INSURANCE COSTS CATCH UP WITH EXPORT PRICE INCREASES. IMF HAS PROJECTED B/P SURPLUS MAY ALMOST DISAPPEAR AND MAY WELL BE IN DEFICIT IN 1975 AND THAT CURRENT ACCOUNT BALANCE WILL AGAIN BE DECIDEDLY NEGATIVE ON ALL REASONABLE ASSUMPTIONS. ADDITIONAL B/P ANALYSIS BEING SENT SEPTEL UNDER PREPARATION WITH SUBJECT TITLE “IMPLICATIONS FOR BOLIVIAN ECONOMIC AND DEVEL- OPMENT PROSPECTS OF ITS 1974 EXPORT PRICES”. STEDMAN</li>
</ol>
<hr>
<section id="message-attributes" class="level4">
<h4 class="anchored" data-anchor-id="message-attributes">Message Attributes</h4>
<ul>
<li><p><strong>Document Number:</strong> 1974LAPAZ03128</p></li>
<li><p><strong>Date:</strong> May 14, 1974</p></li>
<li><p><strong>Classification:</strong> UNCLASSIFIED</p></li>
<li><p><strong>Declassified:</strong> 01 JAN 1960</p></li>
<li><p><strong>Concepts:</strong> WHEAT, DATA, PL 480 TITLE 1, BALANCE OF PAYMENTS DEFICITS, CREDIT AGREEMENTS, FOREIGN ASSISTANCE PROGRAMS,</p></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>